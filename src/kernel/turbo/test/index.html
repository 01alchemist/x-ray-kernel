<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>X Ray kernel Test 1</title>

    <script src="../../../../node_modules/three/build/three.js"></script>
    <script src="../../../../libs/threejs/controls/EditorControls.js"></script>
    <script src="../../../../node_modules/three/examples/js/loaders/DDSLoader.js"></script>
    <script src="../../../../node_modules/three/examples/js/loaders/MTLLoader.js"></script>
    <script src="../../../../node_modules/three/examples/js/loaders/OBJLoader.js"></script>

    <script>
        exports = window.exports ? window.exports : {};
        SharedInt8Array = Int8Array;
    </script>

    <script src="../turbo-runtime.js"></script>
    <!--<script src="../src/api/Kernel.js"></script>ยง-->
</head>
<body>
<script>
    turbo.init(1024);
</script>
<script src="../xray-kernel-turbo.js"></script>
<script>
    let worker = new Worker("thread.js");
    worker.onmessage = function (msg) {

        switch (msg.data.event) {
            case "BOOTED":
                worker.postMessage({
                            command: "INIT",
                            isLeader: true,
                            width: 2560 / 4,
                            height: 1440 / 4,
                            iterations: 1,
                            hitSamples: 1,
                            cameraSamples: 1,
                            blockIterations: 1,
                            bounces: 0,
                            buffer: unsafe.RAW_MEMORY
                        },
                        [unsafe.RAW_MEMORY]
                );
                worker.postMessage({command: "LOAD_MODEL", file: "cornellbox_suzanne_lucy"});
                break;
            case "MODEL_LOADED":

                break;
        }
    };
</script>
</body>
</html>